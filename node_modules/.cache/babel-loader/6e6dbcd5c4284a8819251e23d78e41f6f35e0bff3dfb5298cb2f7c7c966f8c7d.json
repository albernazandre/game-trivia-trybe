{"ast":null,"code":"export const LOGIN = 'LOGIN';\nexport const LOGIN_ACTION = payload => ({\n  type: LOGIN,\n  payload\n});\n_c = LOGIN_ACTION;\nconst fetchToken = async () => {\n  const firstFetch = await fetch('https://opentdb.com/api_token.php?command=request');\n  const token = await firstFetch.json();\n  return token.token;\n};\nconst fetchGame = async token => {\n  const secondFetch = await fetch(`https://opentdb.com/api.php?amount=5&token=${token}`);\n  const response = await secondFetch.json();\n  return response;\n};\nexport const fetchTrivia = () => async () => {\n  const magicNumber = 3;\n  const localStorageToken = localStorage.getItem('token');\n  if (localStorageToken) {\n    const response = fetchGame(localStorageToken);\n    if (response.response_code === magicNumber) {\n      const token = await fetchToken();\n      localStorage.setItem('token', token);\n      return fetchGame(token);\n    }\n  }\n  const token = await fetchToken();\n  localStorage.setItem('token', token);\n  return fetchGame(token);\n};\nvar _c;\n$RefreshReg$(_c, \"LOGIN_ACTION\");","map":{"version":3,"names":["LOGIN","LOGIN_ACTION","payload","type","fetchToken","firstFetch","fetch","token","json","fetchGame","secondFetch","response","fetchTrivia","magicNumber","localStorageToken","localStorage","getItem","response_code","setItem"],"sources":["/home/andre/Documentos/albernazandre.github.io/sd-028-a-project-trivia-react-redux/src/redux/actions/index.js"],"sourcesContent":["export const LOGIN = 'LOGIN';\n\nexport const LOGIN_ACTION = (payload) => ({\n  type: LOGIN,\n  payload,\n});\n\nconst fetchToken = async () => {\n  const firstFetch = await fetch('https://opentdb.com/api_token.php?command=request');\n  const token = await firstFetch.json();\n  return token.token;\n};\n\nconst fetchGame = async (token) => {\n  const secondFetch = await fetch(`https://opentdb.com/api.php?amount=5&token=${token}`);\n  const response = await secondFetch.json();\n  return response;\n};\n\nexport const fetchTrivia = () => async () => {\n  const magicNumber = 3;\n  const localStorageToken = localStorage.getItem('token');\n  if (localStorageToken) {\n    const response = fetchGame(localStorageToken);\n    if (response.response_code === magicNumber) {\n      const token = await fetchToken();\n      localStorage.setItem('token', token);\n      return fetchGame(token);\n    }\n  }\n  const token = await fetchToken();\n  localStorage.setItem('token', token);\n  return fetchGame(token);\n};\n"],"mappings":"AAAA,OAAO,MAAMA,KAAK,GAAG,OAAO;AAE5B,OAAO,MAAMC,YAAY,GAAIC,OAAO,KAAM;EACxCC,IAAI,EAAEH,KAAK;EACXE;AACF,CAAC,CAAC;AAAC,KAHUD,YAAY;AAKzB,MAAMG,UAAU,GAAG,YAAY;EAC7B,MAAMC,UAAU,GAAG,MAAMC,KAAK,CAAC,mDAAmD,CAAC;EACnF,MAAMC,KAAK,GAAG,MAAMF,UAAU,CAACG,IAAI,EAAE;EACrC,OAAOD,KAAK,CAACA,KAAK;AACpB,CAAC;AAED,MAAME,SAAS,GAAG,MAAOF,KAAK,IAAK;EACjC,MAAMG,WAAW,GAAG,MAAMJ,KAAK,CAAE,8CAA6CC,KAAM,EAAC,CAAC;EACtF,MAAMI,QAAQ,GAAG,MAAMD,WAAW,CAACF,IAAI,EAAE;EACzC,OAAOG,QAAQ;AACjB,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,MAAM,YAAY;EAC3C,MAAMC,WAAW,GAAG,CAAC;EACrB,MAAMC,iBAAiB,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACvD,IAAIF,iBAAiB,EAAE;IACrB,MAAMH,QAAQ,GAAGF,SAAS,CAACK,iBAAiB,CAAC;IAC7C,IAAIH,QAAQ,CAACM,aAAa,KAAKJ,WAAW,EAAE;MAC1C,MAAMN,KAAK,GAAG,MAAMH,UAAU,EAAE;MAChCW,YAAY,CAACG,OAAO,CAAC,OAAO,EAAEX,KAAK,CAAC;MACpC,OAAOE,SAAS,CAACF,KAAK,CAAC;IACzB;EACF;EACA,MAAMA,KAAK,GAAG,MAAMH,UAAU,EAAE;EAChCW,YAAY,CAACG,OAAO,CAAC,OAAO,EAAEX,KAAK,CAAC;EACpC,OAAOE,SAAS,CAACF,KAAK,CAAC;AACzB,CAAC;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}