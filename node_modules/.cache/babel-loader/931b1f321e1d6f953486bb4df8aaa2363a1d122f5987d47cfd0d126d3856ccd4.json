{"ast":null,"code":"import _objectSpread from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import Header from'../Components/Header';import{playAgainAction}from'../redux/actions';import RankingButton from'../Components/RankingButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var magicNumber=3;var Feedback=/*#__PURE__*/function(_Component){_inherits(Feedback,_Component);var _super=_createSuper(Feedback);function Feedback(){var _this;_classCallCheck(this,Feedback);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.selectionSortDesc=function(array){for(var i=0;i<array.length-1;i+=1){var maxIndex=i;for(var j=i+1;j<array.length;j+=1){if(array[j].score>array[maxIndex].score){maxIndex=j;}}if(maxIndex!==i){var _ref=[array[maxIndex],array[i]];array[i]=_ref[0];array[maxIndex]=_ref[1];}}return array;};_this.handleClick=function(){var _this$props=_this.props,history=_this$props.history,dispatch=_this$props.dispatch;dispatch(playAgainAction());history.push('/');};return _this;}_createClass(Feedback,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props2=this.props,gravatarImage=_this$props2.gravatarImage,name=_this$props2.name,score=_this$props2.score;var rankScore={gravatarImage:gravatarImage,name:name,score:score};var ranking=JSON.parse(localStorage.getItem('ranking'));if(ranking){ranking=[].concat(_toConsumableArray(ranking),[rankScore]);var ordenatedRanking=this.selectionSortDesc(ranking);var top3=ordenatedRanking.slice(0,magicNumber);localStorage.setItem('ranking',JSON.stringify(top3));}else{localStorage.setItem('ranking',JSON.stringify([rankScore]));}}},{key:\"render\",value:function render(){var _this$props3=this.props,assertions=_this$props3.assertions,score=_this$props3.score,history=_this$props3.history;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"feedback-total-score\",children:score}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"feedback-total-question\",children:assertions}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"feedback-text\",children:assertions>=magicNumber?'Well Done!':'Could be better...'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"btn-play-again\",onClick:this.handleClick,children:\"Play Again\"}),/*#__PURE__*/_jsx(RankingButton,{onClick:function onClick(){return history.push('/ranking');}})]});}}]);return Feedback;}(Component);var mapStateToProps=function mapStateToProps(state){return _objectSpread({},state.player);};export default connect(mapStateToProps)(Feedback);","map":{"version":3,"names":["React","Component","connect","Header","playAgainAction","RankingButton","magicNumber","Feedback","selectionSortDesc","array","i","length","maxIndex","j","score","handleClick","props","history","dispatch","push","gravatarImage","name","rankScore","ranking","JSON","parse","localStorage","getItem","ordenatedRanking","top3","slice","setItem","stringify","assertions","mapStateToProps","state","player"],"sources":["/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/src/Pages/Feedback.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Header from '../Components/Header';\nimport { playAgainAction } from '../redux/actions';\nimport RankingButton from '../Components/RankingButton';\n\nconst magicNumber = 3;\n\nclass Feedback extends Component {\n  componentDidMount() {\n    const { gravatarImage, name, score } = this.props;\n    const rankScore = {\n      gravatarImage,\n      name,\n      score,\n    };\n    let ranking = JSON.parse(localStorage.getItem('ranking'));\n    if (ranking) {\n      ranking = [...ranking, rankScore];\n      const ordenatedRanking = this.selectionSortDesc(ranking);\n      const top3 = ordenatedRanking.slice(0, magicNumber);\n      localStorage.setItem('ranking', JSON.stringify(top3));\n    } else {\n      localStorage.setItem('ranking', JSON.stringify([rankScore]));\n    }\n  }\n\n  selectionSortDesc = (array) => {\n    for (let i = 0; i < array.length - 1; i += 1) {\n      let maxIndex = i;\n      for (let j = i + 1; j < array.length; j += 1) {\n        if (array[j].score > array[maxIndex].score) {\n          maxIndex = j;\n        }\n      }\n      if (maxIndex !== i) {\n        [array[i], array[maxIndex]] = [array[maxIndex], array[i]];\n      }\n    }\n    return array;\n  };\n\n  handleClick = () => {\n    const { history, dispatch } = this.props;\n    dispatch(playAgainAction());\n    history.push('/');\n  };\n\n  render() {\n    const { assertions, score, history } = this.props;\n    return (\n      <div>\n        <Header />\n        <p\n          data-testid=\"feedback-total-score\"\n        >\n          {score}\n        </p>\n        <p\n          data-testid=\"feedback-total-question\"\n        >\n          {assertions}\n        </p>\n        <p\n          data-testid=\"feedback-text\"\n        >\n          {assertions >= magicNumber ? 'Well Done!' : 'Could be better...'}\n        </p>\n        <button\n          type=\"button\"\n          data-testid=\"btn-play-again\"\n          onClick={ this.handleClick }\n        >\n          Play Again\n\n        </button>\n        <RankingButton onClick={ () => history.push('/ranking') } />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  ...state.player,\n});\n\nFeedback.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired,\n  assertions: PropTypes.number.isRequired,\n  score: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  gravatarImage: PropTypes.string.isRequired,\n};\n\nexport default connect(mapStateToProps)(Feedback);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}