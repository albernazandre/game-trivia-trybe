{"ast":null,"code":"import _objectSpread from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/node_modules/@babel/runtime/helpers/esm/createSuper.js\";// Pagina de Login\n// Aqui temos:\n// Funcao que realiza mudanças no estado inicial passado (handleChange)\n// handleChange tambem reconhece se a funcao validation do botao play retorna true\n// Requisicao de API do token que permite fazermos as requisicoes de perguntas que serao respondidas no jogo\n// localStorage que armazenar o token gerado\n// Funcao que cria o jogo a partir do momento que o token existe na localstorage, funcao mountGame\n// Funcao async handleClick que faz com que apos o clique no botao, dispare a acao de login apos funcao validation\n// Funcao validation que valida se email e nome correspondem às especificões e assim valida-se o login\nimport React,{Component}from'react';import{connect}from'react-redux';import{loginAction}from'../redux/actions';import'../style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:'',name:'',disabled:true};_this.handleChange=function(_ref){var target=_ref.target;var name=target.name,value=target.value;_this.setState(_defineProperty({},name,value),function(){if(_this.validation()){_this.setState({disabled:false});}else{_this.setState({disabled:true});}});};_this.fetchToken=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var firstFetch,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://opentdb.com/api_token.php?command=request');case 2:firstFetch=_context.sent;_context.next=5;return firstFetch.json();case 5:token=_context.sent;return _context.abrupt(\"return\",token.token);case 7:case\"end\":return _context.stop();}},_callee);}));_this.mountGame=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var history,localStorageToken,token;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:history=_this.props.history;localStorageToken=localStorage.getItem('token');if(!localStorageToken){_context2.next=6;break;}history.push('/game');_context2.next=11;break;case 6:_context2.next=8;return _this.fetchToken();case 8:token=_context2.sent;localStorage.setItem('token',token);history.push('/game');case 11:case\"end\":return _context2.stop();}},_callee2);}));_this.handleClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var dispatch;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch=_this.props.dispatch;dispatch(loginAction(_this.state));_this.mountGame();case 3:case\"end\":return _context3.stop();}},_callee3);}));_this.validation=function(){var _this$state=_this.state,email=_this$state.email,name=_this$state.name;var magicNumber=1;var regex=/^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g;var returnRegex=regex.test(email);var returnPass=name.length>=magicNumber;return!!(returnPass&&returnRegex);};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,name=_this$state2.name,disabled=_this$state2.disabled;var history=this.props.history;return/*#__PURE__*/_jsx(\"div\",{className:\"loginPage\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"name\",children:[\"Nome\",' ',/*#__PURE__*/_jsx(\"div\",{className:\"inputLogin\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"name\",name:\"name\",placeholder:\"Insira seu nome...\",value:name,type:\"text\",\"data-testid\":\"input-player-name\",onChange:this.handleChange})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",children:[\"Email\",' ',/*#__PURE__*/_jsx(\"div\",{className:\"inputLogin\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"email\",name:\"email\",placeholder:\"Insira seu e-mail...\",value:email,type:\"email\",\"data-testid\":\"input-gravatar-email\",onChange:this.handleChange})})]})}),/*#__PURE__*/_jsx(\"button\",{disabled:disabled,className:\"btn btn-primary loginBtn\",type:\"button\",\"data-testid\":\"btn-play\",onClick:this.handleClick,children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary loginBtn\",type:\"button\",\"data-testid\":\"btn-settings\",onClick:function onClick(){return history.push('/setting');},children:\"Settings\"})]})})});}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return _objectSpread({},state.player);};export default connect(mapStateToProps)(Login);","map":{"version":3,"names":["React","Component","connect","loginAction","Login","state","email","name","disabled","handleChange","target","value","setState","validation","fetchToken","fetch","firstFetch","json","token","mountGame","history","props","localStorageToken","localStorage","getItem","push","setItem","handleClick","dispatch","magicNumber","regex","returnRegex","test","returnPass","length","mapStateToProps","player"],"sources":["/home/andre/Documentos/Andre/Documentos/projetos-autonomos/Repositorios/repositorios-projetos-isolados/game-trivia-trybe/src/Pages/Login.js"],"sourcesContent":["// Pagina de Login\n\n// Aqui temos:\n// Funcao que realiza mudanças no estado inicial passado (handleChange)\n// handleChange tambem reconhece se a funcao validation do botao play retorna true\n// Requisicao de API do token que permite fazermos as requisicoes de perguntas que serao respondidas no jogo\n// localStorage que armazenar o token gerado\n// Funcao que cria o jogo a partir do momento que o token existe na localstorage, funcao mountGame\n// Funcao async handleClick que faz com que apos o clique no botao, dispare a acao de login apos funcao validation\n// Funcao validation que valida se email e nome correspondem às especificões e assim valida-se o login\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { loginAction } from '../redux/actions';\nimport '../style.css';\n\nclass Login extends Component {\n  state = {\n    email: '',\n    name: '',\n    disabled: true,\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: value }, () => {\n      if (this.validation()) {\n        this.setState({ disabled: false });\n      } else {\n        this.setState({ disabled: true });\n      }\n    });\n  };\n\n  fetchToken = async () => {\n    const firstFetch = await fetch('https://opentdb.com/api_token.php?command=request');\n    const token = await firstFetch.json();\n    return token.token;\n  };\n\n  mountGame = async () => {\n    const { history } = this.props;\n    const localStorageToken = localStorage.getItem('token');\n    if (localStorageToken) {\n      history.push('/game');\n    } else {\n      const token = await this.fetchToken();\n      localStorage.setItem('token', token);\n      history.push('/game');\n    }\n  };\n\n  handleClick = async () => {\n    const { dispatch } = this.props;\n    dispatch(loginAction(this.state));\n    this.mountGame();\n  };\n\n  validation = () => {\n    const { email, name } = this.state;\n    const magicNumber = 1;\n    const regex = /^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g;\n    const returnRegex = regex.test(email);\n    const returnPass = name.length >= magicNumber;\n    return !!(returnPass && returnRegex);\n  };\n\n  render() {\n    const { email, name, disabled } = this.state;\n    const { history } = this.props;\n    return (\n      <div className=\"loginPage\">\n        <form>\n          <div className=\"flex\">\n            <div className=\"label\">\n              <label htmlFor=\"name\">\n                Nome\n                {' '}\n                <div\n                  className=\"inputLogin\"\n                >\n                  <input\n                    className=\"form-control\"\n                    id=\"name\"\n                    name=\"name\"\n                    placeholder=\"Insira seu nome...\"\n                    value={ name }\n                    type=\"text\"\n                    data-testid=\"input-player-name\"\n                    onChange={ this.handleChange }\n                  />\n                </div>\n              </label>\n            </div>\n            <div className=\"label\">\n              <label htmlFor=\"email\">\n                Email\n                {' '}\n                <div className=\"inputLogin\">\n                  <input\n                    className=\"form-control\"\n                    id=\"email\"\n                    name=\"email\"\n                    placeholder=\"Insira seu e-mail...\"\n                    value={ email }\n                    type=\"email\"\n                    data-testid=\"input-gravatar-email\"\n                    onChange={ this.handleChange }\n                  />\n\n                </div>\n              </label>\n            </div>\n            <button\n              disabled={ disabled }\n              className=\"btn btn-primary loginBtn\"\n              type=\"button\"\n              data-testid=\"btn-play\"\n              onClick={ this.handleClick }\n            >\n              Play\n\n            </button>\n            <button\n              className=\"btn btn-primary loginBtn\"\n              type=\"button\"\n              data-testid=\"btn-settings\"\n              onClick={ () => history.push('/setting') }\n            >\n              Settings\n\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  ...state.player,\n});\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps)(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}